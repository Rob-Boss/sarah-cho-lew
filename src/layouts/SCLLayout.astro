---
import CurtainReveal from "../components/scl/CurtainReveal.svelte";
import StageFrame from "../components/scl/StageFrame.svelte";
import FeedIndicators from "../components/scl/FeedIndicators.svelte";
import Navbar from "../components/scl/Navbar.svelte";
import LoadingOverlay from "../components/scl/LoadingOverlay.svelte";
import About from "../components/scl/About.svelte";
import Contact from "../components/scl/Contact.svelte";
import Film from "../components/scl/Film.svelte";
import Live from "../components/scl/Live.svelte";
import { filmProjects } from "../data/film-projects";
import { liveProjects } from "../data/live-projects";
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Sarah Cho Lew - Director</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <LoadingOverlay client:load />
        <Navbar client:load />

        <Film client:load />
        <Live client:load />

        <About client:load />
        <Contact client:load />
        <CurtainReveal client:load />
        <FeedIndicators
            filmSlideCount={filmProjects.length + 1}
            liveSlideCount={liveProjects.length + 1}
            client:load
        />
        <StageFrame client:load />
    </body>
</html>

<style>
    /* Sarah Cho Lew Palette */
    :root {
        --scl-mustard: #e8b830;
        --scl-teal: #3a9dad;
        --scl-teal-deep: #1d6068;
        --scl-rust: #c44a2d;
        --scl-cream: #f5f0e0;
        --scl-brown: #5c4a3d;

        /* FLUID CURTAIN LOCK */
        /* Curtains are 25vw wide. We want them to start sliding off-screen 
           when the screen is narrower than 1100px. */
        --scl-curtain-width: 25vw;
        --scl-push-threshold: 1100px;

        /* Calculate how much we need to 'push' curtains out to maintain space.
           Push is 0 until we hit the threshold. */
        --scl-curtain-push: max(
            0px,
            calc((var(--scl-push-threshold) - 100vw) / 2)
        );

        /* The visible part of the curtain is width minus push. 
           We clamp it at a minimum of 10px so a tiny sliver always remains. */
        --scl-visible-curtain: max(
            10px,
            calc(var(--scl-curtain-width) - var(--scl-curtain-push))
        );

        /* The actual movement offset applied to StageFrame positions */
        --scl-curtain-offset: calc(
            var(--scl-curtain-width) - var(--scl-visible-curtain)
        );
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: "Fredoka", sans-serif;
        background: var(--scl-mustard);
        color: var(--scl-teal-deep);
        height: 100dvh;
        width: 100vw;
        overflow: hidden;
        position: fixed; /* Prevent bouncy scrolling on mobile body */
        touch-action: none; /* Let the feed handle all gestures */

        /* Finer paper grain */
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        background-size: 100px 100px;
        background-blend-mode: soft-light;
    }

    .stage-feed {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        height: 100dvh;
        width: 100vw;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: y mandatory;
        scrollbar-width: none;
        -ms-overflow-style: none;
        z-index: 1;
        isolation: isolate;
        /* Padding matches the visible part of the curtain 
           to center the "aperture" content. */
        padding: 60px var(--scl-visible-curtain) 0;
        touch-action: pan-y;
    }

    .stage-feed::-webkit-scrollbar {
        display: none;
    }

    .feed-slide {
        height: 100vh;
        width: 100%;
        scroll-snap-align: start;
        scroll-snap-stop: always;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .reel-slide {
        padding: 0 4vw;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .hero-headline {
        margin-top: 4vh;
        margin-bottom: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 5;
        position: relative;
    }

    .line {
        display: block;
        font-weight: 700;
        text-transform: uppercase;
        line-height: 0.85;
    }

    .line-1 {
        font-size: clamp(2rem, 6vmin, 5rem);
        color: var(--scl-teal-deep);
        transform: rotate(-2deg);
        text-shadow: 4px 4px 0 white;
    }

    .line-2 {
        font-size: clamp(3rem, 12vmin, 10rem);
        color: var(--scl-rust);
        margin-top: -0.1em;
        transform: rotate(2deg);
        text-shadow: 8px 8px 0 white;
    }

    .theater-wrapper {
        z-index: 1;
        width: 100%;
        max-width: 900px;
        display: flex;
        justify-content: center;
        transform: scale(0.75);
        margin-top: -2vh;
        animation: theaterHold 6s ease-in-out infinite;
    }

    @keyframes theaterHold {
        0%,
        100% {
            transform: scale(0.75) rotate(-0.5deg);
        }
        50% {
            transform: scale(0.76) rotate(0.5deg);
        }
    }

    .scroll-indicator {
        position: absolute;
        bottom: 8vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        color: var(--scl-teal-deep);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-size: 0.8rem;
        animation: bounce 2s infinite;
        opacity: 0.6;
    }

    @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
            transform: translateY(0);
        }
        40% {
            transform: translateY(-10px);
        }
        60% {
            transform: translateY(-5px);
        }
    }

    @media (max-width: 768px) {
        .reel-slide {
            padding: 5vh 10vw;
        }
        .theater-wrapper {
            transform: scale(0.65);
        }
        .line-1 {
            font-size: clamp(2rem, 8vw, 4rem);
        }
        .line-2 {
            font-size: clamp(3rem, 15vw, 8rem);
        }
    }

    @media (max-height: 850px) {
        .theater-wrapper {
            transform: scale(0.6);
            margin-top: -4vh;
        }
        .line-2 {
            font-size: 10vmin;
        }
    }
</style>
